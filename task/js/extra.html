<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo List with Categories</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
  <div class="container mt-5">
    <div class="card shadow-lg">
      <h2 class="card-header bg-primary text-white text-center">To-Do List (with Categories)</h2>
      <div class="card-body">
        <!-- Input Row -->
        <div class="input-group mb-3">
          <input type="text" id="taskInput" class="form-control" placeholder="Enter a task...">
          <select id="category" class="form-select">
            <option value="Work">Work</option>
            <option value="Personal">Personal</option>
            <option value="Shopping">Shopping</option>
          </select>
          <button class="btn btn-success" onclick="addTask()">Add</button>
        </div>

        <!-- Filter -->
        <div class="mb-3">
          <label class="me-2 fw-bold">Filter by:</label>
          <select id="filter" class="form-select w-auto d-inline" onchange="renderTasks()">
            <option value="All">All</option>
            <option value="Work">Work</option>
            <option value="Personal">Personal</option>
            <option value="Shopping">Shopping</option>
          </select>
        </div>

        <!-- Task List -->
        <ul id="taskList" class="list-group"></ul>
      </div>
    </div>
  </div>

  <script>
    const taskInput = document.getElementById("taskInput");
    const taskList = document.getElementById("taskList");
    const category = document.getElementById("category");
    const filter = document.getElementById("filter");

    let tasks = [];

    function renderTasks() {
      taskList.innerHTML = "";
      const selectedFilter = filter.value;

      tasks.forEach((task, index) => {
        if (selectedFilter !== "All" && task.category !== selectedFilter) {
          return; // skip tasks not in the filter
        }

        const li = document.createElement("li");
        li.className = "list-group-item d-flex justify-content-between align-items-center";

        const left = document.createElement("div");

        const span = document.createElement("span");
        span.textContent = task.text + " ";
        if (task.done) {
          span.style.textDecoration = "line-through";
          span.style.color = "grey";
        }
        left.appendChild(span);

        // Category badge
        const badge = document.createElement("span");
        badge.className = "badge bg-secondary";
        badge.textContent = task.category;
        left.appendChild(badge);

        li.appendChild(left);

        // Buttons
        const groupBtn = document.createElement("div");

        // Complete/Undo button
        const toggleBtn = document.createElement("button");
        toggleBtn.textContent = task.done ? "Undo" : "Complete";
        toggleBtn.className = "btn btn-sm btn-outline-success me-2";
        toggleBtn.onclick = () => {
          tasks[index].done = !tasks[index].done;
          renderTasks();
        };
        groupBtn.appendChild(toggleBtn);

        // Delete button
        const delBtn = document.createElement("button");
        delBtn.textContent = "Delete";
        delBtn.className = "btn btn-sm btn-outline-danger";
        delBtn.onclick = () => {
          tasks.splice(index, 1);
          renderTasks();
        };
        groupBtn.appendChild(delBtn);

        li.appendChild(groupBtn);
        taskList.appendChild(li);
      });
    }

    function addTask() {
      const text = taskInput.value.trim();
      const cat = category.value;
      if (text === "") {
        alert("Please enter a task!");
        return;
      }
      tasks.push({ text: text, category: cat, done: false });
      renderTasks();
      taskInput.value = "";
    }
  </script>
</body>

</html>
